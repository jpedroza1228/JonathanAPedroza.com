{
  "hash": "0393284b09299e6a713f1aac4dfc5d57",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: Creating Parameterized Reports\nsubtitle: |\n  With Quarto & Python\nimage: rollercoaster_loop.jpg\ncategories:\n  - Python\n  - Quarto\n  - Pandas\n  - Plotnine\n  - Great Tables\n  - Plotly\ndate: '2024-12-05'\nexecute:\n  enabled: true\n  warning: false\n  message: false\neditor_options:\n  chunk_output_type: console\nparams:\n  slug: python-parameterized-report\n  date: '2024-12-05'\n---\n\n![Photo by [Jonny Gios](https://unsplash.com/@supergios?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash) on [Unsplash](https://unsplash.com/photos/green-and-brown-roller-coaster-under-blue-sky-during-daytime-M6sDLz3MCmE?utm_content=creditCopyText&utm_medium=referral&utm_source=unsplash)](rollercoaster_loop.jpg){fig-alt=\"An image of rollercoaster going through two loops.\" fig-align=\"left\" width=\"6in\"}\n\nI wanted to make a quick post about this topic because I could not find much online on this topic and it was something I realized I had not tried in Python. Below is the code for a parameterized report where I am filtering for data from the `palmerpenguins` package to only look at data from 2007. I decided on the `palmerpenguins` dataset because it is accessible and can showcase a simple for loop that renders a yearly report on penguin measurements. \n\nThe for loop script can be found [here]() and the actual files created are showcased [here](). This example will only show the template that was used for the Quarto document. Also, as I was creating this I came across a wonderful video explaining a more in-depth example of looping through a couple of parameters for Quarto documents in Python (video [here](https://www.youtube.com/watch?v=_kjs_u3Ctt4), Quarto document code [here](https://github.com/KeithGalli/quarto-crash-course/blob/parameterized-reports/parameterized-report.qmd), for loop code [here](https://github.com/KeithGalli/quarto-crash-course/blob/parameterized-reports/generate_all_reports.py)).\n\n\n```{r}\nlibrary(reticulate)\nuse_python(\"C:/Users/Jonathan/Documents/github_projects/JonathanAPedroza.com/blog/Scripts/python.exe\")\n```\n\n::: {#d5e5d2e6 .cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport plotnine as pn\nfrom matplotlib import rcParams\nfrom IPython.display import display, Markdown\nfrom great_tables import GT\nimport plotly.express as px\nfrom palmerpenguins import load_penguins\n```\n:::\n\n\n### Parameter(s)\n\n::: {#7d1938b4 .cell tags='[\"parameters\"]' execution_count=2}\n``` {.python .cell-code}\nyear = 2007\n```\n:::\n\n\n::: {#770022e5 .cell execution_count=3}\n``` {.python .cell-code}\npenguins = load_penguins()\n```\n:::\n\n\n## EDA\n\n::: {#721faeb0 .cell execution_count=4}\n\n::: {.cell-output .cell-output-stdout}\n```\n     species     island     sex  bill_length_mm  bill_depth_mm  \\\n0     Adelie     Biscoe  female           37.48          18.58   \n1     Adelie     Biscoe    male           39.16          18.30   \n2     Adelie      Dream  female           37.86          17.84   \n3     Adelie      Dream    male           40.38          19.43   \n4     Adelie  Torgersen  female           38.28          18.16   \n5     Adelie  Torgersen    male           39.90          20.49   \n6  Chinstrap      Dream  female           46.57          17.84   \n7  Chinstrap      Dream    male           50.88          19.13   \n8     Gentoo     Biscoe  female           45.06          13.99   \n9     Gentoo     Biscoe    male           49.00          15.36   \n\n   flipper_length_mm  body_mass_g  \n0             181.80      3470.00  \n1             181.60      3770.00  \n2             185.00      3269.44  \n3             188.60      4102.50  \n4             187.62      3475.00  \n5             192.29      4139.29  \n6             188.69      3569.23  \n7             196.15      3819.23  \n8             211.06      4618.75  \n9             218.88      5552.94  \n      species     island     sex           variable    value\n0      Adelie     Biscoe  female     bill_length_mm    37.48\n1      Adelie     Biscoe    male     bill_length_mm    39.16\n2      Adelie      Dream  female     bill_length_mm    37.86\n3      Adelie      Dream    male     bill_length_mm    40.38\n4      Adelie  Torgersen  female     bill_length_mm    38.28\n5      Adelie  Torgersen    male     bill_length_mm    39.90\n6   Chinstrap      Dream  female     bill_length_mm    46.57\n7   Chinstrap      Dream    male     bill_length_mm    50.88\n8      Gentoo     Biscoe  female     bill_length_mm    45.06\n9      Gentoo     Biscoe    male     bill_length_mm    49.00\n10     Adelie     Biscoe  female      bill_depth_mm    18.58\n11     Adelie     Biscoe    male      bill_depth_mm    18.30\n12     Adelie      Dream  female      bill_depth_mm    17.84\n13     Adelie      Dream    male      bill_depth_mm    19.43\n14     Adelie  Torgersen  female      bill_depth_mm    18.16\n15     Adelie  Torgersen    male      bill_depth_mm    20.49\n16  Chinstrap      Dream  female      bill_depth_mm    17.84\n17  Chinstrap      Dream    male      bill_depth_mm    19.13\n18     Gentoo     Biscoe  female      bill_depth_mm    13.99\n19     Gentoo     Biscoe    male      bill_depth_mm    15.36\n20     Adelie     Biscoe  female  flipper_length_mm   181.80\n21     Adelie     Biscoe    male  flipper_length_mm   181.60\n22     Adelie      Dream  female  flipper_length_mm   185.00\n23     Adelie      Dream    male  flipper_length_mm   188.60\n24     Adelie  Torgersen  female  flipper_length_mm   187.62\n25     Adelie  Torgersen    male  flipper_length_mm   192.29\n26  Chinstrap      Dream  female  flipper_length_mm   188.69\n27  Chinstrap      Dream    male  flipper_length_mm   196.15\n28     Gentoo     Biscoe  female  flipper_length_mm   211.06\n29     Gentoo     Biscoe    male  flipper_length_mm   218.88\n30     Adelie     Biscoe  female        body_mass_g  3470.00\n31     Adelie     Biscoe    male        body_mass_g  3770.00\n32     Adelie      Dream  female        body_mass_g  3269.44\n33     Adelie      Dream    male        body_mass_g  4102.50\n34     Adelie  Torgersen  female        body_mass_g  3475.00\n35     Adelie  Torgersen    male        body_mass_g  4139.29\n36  Chinstrap      Dream  female        body_mass_g  3569.23\n37  Chinstrap      Dream    male        body_mass_g  3819.23\n38     Gentoo     Biscoe  female        body_mass_g  4618.75\n39     Gentoo     Biscoe    male        body_mass_g  5552.94\n```\n:::\n:::\n\n\n::: {#e99c8403 .cell execution_count=5}\n``` {.python .cell-code}\n(\n  pn.ggplot(pen, pn.aes('factor(species)', 'value'))\n  + pn.geom_col(pn.aes(fill = 'island'), position = pn.position_dodge())\n  + pn.facet_wrap('variable', scales = 'free')\n  + pn.theme(legend_position = 'bottom')\n)\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-1.png){width=672 height=480}\n:::\n:::\n\n\n::: {#fd7b6c2d .cell execution_count=6}\n``` {.python .cell-code}\ndisplay(Markdown(f\"\"\"\n## Average Measurements For Different Penguin Species By Island and Sex in the Year {year}\n\"\"\"))\n```\n\n::: {.cell-output .cell-output-display .cell-output-markdown}\n\n## Average Measurements For Different Penguin Species By Island and Sex in the Year 2007\n\n:::\n:::\n\n\n::: {#711dff8b .cell execution_count=7}\n``` {.python .cell-code}\n(\n  GT(pen_table)\n)\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div id=\"mqwwmdsacm\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>\n#mqwwmdsacm table {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n\n#mqwwmdsacm thead, tbody, tfoot, tr, td, th { border-style: none; }\n tr { background-color: transparent; }\n#mqwwmdsacm p { margin: 0; padding: 0; }\n #mqwwmdsacm .gt_table { display: table; border-collapse: collapse; line-height: normal; margin-left: auto; margin-right: auto; color: #333333; font-size: 16px; font-weight: normal; font-style: normal; background-color: #FFFFFF; width: auto; border-top-style: solid; border-top-width: 2px; border-top-color: #A8A8A8; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #A8A8A8; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; }\n #mqwwmdsacm .gt_caption { padding-top: 4px; padding-bottom: 4px; }\n #mqwwmdsacm .gt_title { color: #333333; font-size: 125%; font-weight: initial; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; border-bottom-color: #FFFFFF; border-bottom-width: 0; }\n #mqwwmdsacm .gt_subtitle { color: #333333; font-size: 85%; font-weight: initial; padding-top: 3px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; border-top-color: #FFFFFF; border-top-width: 0; }\n #mqwwmdsacm .gt_heading { background-color: #FFFFFF; text-align: center; border-bottom-color: #FFFFFF; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #mqwwmdsacm .gt_bottom_border { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #mqwwmdsacm .gt_col_headings { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; }\n #mqwwmdsacm .gt_col_heading { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; padding-right: 5px; overflow-x: hidden; }\n #mqwwmdsacm .gt_column_spanner_outer { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: normal; text-transform: inherit; padding-top: 0; padding-bottom: 0; padding-left: 4px; padding-right: 4px; }\n #mqwwmdsacm .gt_column_spanner_outer:first-child { padding-left: 0; }\n #mqwwmdsacm .gt_column_spanner_outer:last-child { padding-right: 0; }\n #mqwwmdsacm .gt_column_spanner { border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: bottom; padding-top: 5px; padding-bottom: 5px; overflow-x: hidden; display: inline-block; width: 100%; }\n #mqwwmdsacm .gt_spanner_row { border-bottom-style: hidden; }\n #mqwwmdsacm .gt_group_heading { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; text-align: left; }\n #mqwwmdsacm .gt_empty_group_heading { padding: 0.5px; color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; vertical-align: middle; }\n #mqwwmdsacm .gt_from_md> :first-child { margin-top: 0; }\n #mqwwmdsacm .gt_from_md> :last-child { margin-bottom: 0; }\n #mqwwmdsacm .gt_row { padding-top: 8px; padding-bottom: 8px; padding-left: 5px; padding-right: 5px; margin: 10px; border-top-style: solid; border-top-width: 1px; border-top-color: #D3D3D3; border-left-style: none; border-left-width: 1px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 1px; border-right-color: #D3D3D3; vertical-align: middle; overflow-x: hidden; }\n #mqwwmdsacm .gt_stub { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; }\n #mqwwmdsacm .gt_stub_row_group { color: #333333; background-color: #FFFFFF; font-size: 100%; font-weight: initial; text-transform: inherit; border-right-style: solid; border-right-width: 2px; border-right-color: #D3D3D3; padding-left: 5px; padding-right: 5px; vertical-align: top; }\n #mqwwmdsacm .gt_row_group_first td { border-top-width: 2px; }\n #mqwwmdsacm .gt_row_group_first th { border-top-width: 2px; }\n #mqwwmdsacm .gt_striped { background-color: rgba(128,128,128,0.05); }\n #mqwwmdsacm .gt_table_body { border-top-style: solid; border-top-width: 2px; border-top-color: #D3D3D3; border-bottom-style: solid; border-bottom-width: 2px; border-bottom-color: #D3D3D3; }\n #mqwwmdsacm .gt_sourcenotes { color: #333333; background-color: #FFFFFF; border-bottom-style: none; border-bottom-width: 2px; border-bottom-color: #D3D3D3; border-left-style: none; border-left-width: 2px; border-left-color: #D3D3D3; border-right-style: none; border-right-width: 2px; border-right-color: #D3D3D3; }\n #mqwwmdsacm .gt_sourcenote { font-size: 90%; padding-top: 4px; padding-bottom: 4px; padding-left: 5px; padding-right: 5px; text-align: left; }\n #mqwwmdsacm .gt_left { text-align: left; }\n #mqwwmdsacm .gt_center { text-align: center; }\n #mqwwmdsacm .gt_right { text-align: right; font-variant-numeric: tabular-nums; }\n #mqwwmdsacm .gt_font_normal { font-weight: normal; }\n #mqwwmdsacm .gt_font_bold { font-weight: bold; }\n #mqwwmdsacm .gt_font_italic { font-style: italic; }\n #mqwwmdsacm .gt_super { font-size: 65%; }\n #mqwwmdsacm .gt_footnote_marks { font-size: 75%; vertical-align: 0.4em; position: initial; }\n #mqwwmdsacm .gt_asterisk { font-size: 100%; vertical-align: 0; }\n \n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n<thead>\n\n<tr class=\"gt_col_headings\">\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"species\">species</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"island\">island</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sex\">sex</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bill_length_mm\">bill_length_mm</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"bill_depth_mm\">bill_depth_mm</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"flipper_length_mm\">flipper_length_mm</th>\n  <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"body_mass_g\">body_mass_g</th>\n</tr>\n</thead>\n<tbody class=\"gt_table_body\">\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Biscoe</td>\n    <td class=\"gt_row gt_left\">female</td>\n    <td class=\"gt_row gt_right\">37.48</td>\n    <td class=\"gt_row gt_right\">18.58</td>\n    <td class=\"gt_row gt_right\">181.8</td>\n    <td class=\"gt_row gt_right\">3470.0</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Biscoe</td>\n    <td class=\"gt_row gt_left\">male</td>\n    <td class=\"gt_row gt_right\">39.16</td>\n    <td class=\"gt_row gt_right\">18.3</td>\n    <td class=\"gt_row gt_right\">181.6</td>\n    <td class=\"gt_row gt_right\">3770.0</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Dream</td>\n    <td class=\"gt_row gt_left\">female</td>\n    <td class=\"gt_row gt_right\">37.86</td>\n    <td class=\"gt_row gt_right\">17.84</td>\n    <td class=\"gt_row gt_right\">185.0</td>\n    <td class=\"gt_row gt_right\">3269.44</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Dream</td>\n    <td class=\"gt_row gt_left\">male</td>\n    <td class=\"gt_row gt_right\">40.38</td>\n    <td class=\"gt_row gt_right\">19.43</td>\n    <td class=\"gt_row gt_right\">188.6</td>\n    <td class=\"gt_row gt_right\">4102.5</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Torgersen</td>\n    <td class=\"gt_row gt_left\">female</td>\n    <td class=\"gt_row gt_right\">38.28</td>\n    <td class=\"gt_row gt_right\">18.16</td>\n    <td class=\"gt_row gt_right\">187.62</td>\n    <td class=\"gt_row gt_right\">3475.0</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Adelie</td>\n    <td class=\"gt_row gt_left\">Torgersen</td>\n    <td class=\"gt_row gt_left\">male</td>\n    <td class=\"gt_row gt_right\">39.9</td>\n    <td class=\"gt_row gt_right\">20.49</td>\n    <td class=\"gt_row gt_right\">192.29</td>\n    <td class=\"gt_row gt_right\">4139.29</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Chinstrap</td>\n    <td class=\"gt_row gt_left\">Dream</td>\n    <td class=\"gt_row gt_left\">female</td>\n    <td class=\"gt_row gt_right\">46.57</td>\n    <td class=\"gt_row gt_right\">17.84</td>\n    <td class=\"gt_row gt_right\">188.69</td>\n    <td class=\"gt_row gt_right\">3569.23</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Chinstrap</td>\n    <td class=\"gt_row gt_left\">Dream</td>\n    <td class=\"gt_row gt_left\">male</td>\n    <td class=\"gt_row gt_right\">50.88</td>\n    <td class=\"gt_row gt_right\">19.13</td>\n    <td class=\"gt_row gt_right\">196.15</td>\n    <td class=\"gt_row gt_right\">3819.23</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Gentoo</td>\n    <td class=\"gt_row gt_left\">Biscoe</td>\n    <td class=\"gt_row gt_left\">female</td>\n    <td class=\"gt_row gt_right\">45.06</td>\n    <td class=\"gt_row gt_right\">13.99</td>\n    <td class=\"gt_row gt_right\">211.06</td>\n    <td class=\"gt_row gt_right\">4618.75</td>\n  </tr>\n  <tr>\n    <td class=\"gt_row gt_left\">Gentoo</td>\n    <td class=\"gt_row gt_left\">Biscoe</td>\n    <td class=\"gt_row gt_left\">male</td>\n    <td class=\"gt_row gt_right\">49.0</td>\n    <td class=\"gt_row gt_right\">15.36</td>\n    <td class=\"gt_row gt_right\">218.88</td>\n    <td class=\"gt_row gt_right\">5552.94</td>\n  </tr>\n</tbody>\n\n\n</table>\n\n</div>\n        \n```\n:::\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}